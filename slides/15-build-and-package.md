# –°–ª–∞–π–¥ 15: –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è

**–í–µ—Ç–∫–∞:** `react/15-build-and-package`

---

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–±–æ—Ä–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞?

–°–±–æ—Ä–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∞—à–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤ Chrome Web Store, Firefox Add-ons –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä–æ–≤ –ø—É—Ç–µ–º –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –∫–æ–¥–∞ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –≥–æ—Ç–æ–≤—ã–µ –∫ –∑–∞–≥—Ä—É–∑–∫–µ ZIP-—Ñ–∞–π–ª—ã.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- üì¶ **Production-—Å–±–æ—Ä–∫–∞** - –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üåê **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤** - WXT –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–±–æ—Ä–∫–∏ –¥–ª—è Chrome (MV3) –∏ Firefox (MV2)
- üóúÔ∏è **ZIP-—É–ø–∞–∫–æ–≤–∫–∞** - –ì–æ—Ç–æ–≤—ã–µ –∫ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª—ã –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–æ–≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç, –∏–∫–æ–Ω–∫–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- üîÑ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏** - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚öôÔ∏è **GitHub Actions** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CI/CD –¥–ª—è —Å–±–æ—Ä–æ–∫ –∏ —Ä–µ–ª–∏–∑–æ–≤

---

## üìÇ –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

<details>
<summary><b>–ù–æ–≤—ã–µ/–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã</b></summary>

- üìÑ [wxt.config.ts](../textarea-fullscreen-react/wxt.config.ts) ‚≠ê **–ù–û–í–´–ô** - –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- üìÑ [package.json](../textarea-fullscreen-react/package.json) - –û–±–Ω–æ–≤–ª–µ–Ω —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ —Å–±–æ—Ä–∫–∏
- üìÑ [README.md](../textarea-fullscreen-react/README.md) ‚≠ê **–ù–û–í–´–ô** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìÑ [CHANGELOG.md](../textarea-fullscreen-react/CHANGELOG.md) ‚≠ê **–ù–û–í–´–ô** - –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π
- üìÑ [.github/workflows/build.yml](../textarea-fullscreen-react/.github/workflows/build.yml) ‚≠ê **–ù–û–í–´–ô** - CI/CD –ø–∞–π–ø–ª–∞–π–Ω
- üìÑ [.github/workflows/release.yml](../textarea-fullscreen-react/.github/workflows/release.yml) ‚≠ê **–ù–û–í–´–ô** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–ª–∏–∑–æ–≤

</details>

<details>
<summary><b>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ/–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã</b></summary>

- üìÑ [.gitignore](../textarea-fullscreen-react/.gitignore) - –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–±–æ—Ä–∫–∏
- üìÑ [tsconfig.json](../textarea-fullscreen-react/tsconfig.json)
- üìÑ [public/icon/README.md](../textarea-fullscreen-react/public/icon/README.md) ‚≠ê **–ù–û–í–´–ô** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–∫–æ–Ω–∫–∞–º

</details>

---

## ‚úÖ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ

- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è WXT —Å –¥–µ—Ç–∞–ª—è–º–∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ (Chrome MV3 + Firefox MV2)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ ZIP-—É–ø–∞–∫–æ–≤–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚úÖ **GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ—Ä–æ–∫**
- ‚úÖ **GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–ª–∏–∑–æ–≤**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –æ–ø—Ü–∏—è `runner` ‚Üí –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `dev`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `author` ‚Üí –æ–±—ä–µ–∫—Ç `developer`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—Ñ–∞–π–ª—ã –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ)

---

## üìë –ü–æ–¥—Ä–æ–±–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ

- [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—à–∞–≥–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)
- [–û–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#–æ–±—â–∏–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–ó–∞–¥–∞–Ω–∏–µ](#–∑–∞–¥–∞–Ω–∏–µ)

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```mermaid
graph TB
    A[–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥] --> B[–ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ WXT]
    B --> C{–¶–µ–ª–µ–≤–æ–π –±—Ä–∞—É–∑–µ—Ä}
    C -->|Chrome| D[–°–±–æ—Ä–∫–∞ Manifest V3]
    C -->|Firefox| E[–°–±–æ—Ä–∫–∞ Manifest V2]
    D --> F[.output/chrome-mv3/]
    E --> G[.output/firefox-mv2/]
    F --> H[ZIP: chrome-mv3-1.0.0.zip]
    G --> I[ZIP: firefox-mv2-1.0.0.zip]
    H --> J[Chrome Web Store]
    I --> K[Firefox Add-ons]
    
    style A fill:#54bc4a
    style H fill:#ffa500
    style I fill:#ffa500
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ó–∞–ø—É—Å–∫ `npm run build` ‚Üí WXT –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript/JSX
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–¥
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã (MV2 vs MV3)
4. –ö–æ–ø–∏—Ä—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–∏–∫–æ–Ω–∫–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
5. –°–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–±–æ—Ä–∫–∏ –≤ `.output/`
6. –ó–∞–ø—É—Å–∫ `npm run zip` ‚Üí –°–æ–∑–¥–∞–µ—Ç ZIP-—Ñ–∞–π–ª—ã
7. –ó–∞–≥—Ä—É–∑–∫–∞ ZIP –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–∞–≥–∞–∑–∏–Ω—ã

---

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ WXT (–ò–°–ü–†–ê–í–õ–ï–ù–û)

–°–æ–∑–¥–∞–π—Ç–µ `wxt.config.ts`:

```typescript
import { defineConfig } from 'wxt';

export default defineConfig({
  // –í–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å React
  modules: ['@wxt-dev/module-react'],
  
  // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–∞
  outDir: '.output',
  // ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ù–µ—Ç srcDir, –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ (components/, entrypoints/, etc.)
  
  // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
  manifest: {
    // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    name: 'Textarea Fullscreen',
    version: '1.0.0',
    description: '–†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞ÔøΩÔøΩ—Ç–µ –ª—é–±–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–∏—Å–µ–º, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –¥–ª–∏–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.',
    
    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ä–µ–∫—Ç developer –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏ author
    developer: {
      name: '–í–∞—à–µ –∏–º—è',
      url: 'https://github.com/drunkody',
    },
    homepage_url: 'https://github.com/drunkody/textarea-fullscreen',
    
    // –ò–∫–æ–Ω–∫–∏ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤–∞—à–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ)
    icons: {
      16: '/icon/16.png',
      48: '/icon/48.png',
      128: '/icon/128.png'
    },
    
    // –†–∞–∑—Ä–µ—à–µ–Ω–∏—è
    permissions: ['storage'],
    
    // –î–µ–π—Å—Ç–≤–∏–µ (–ø–æ–ø–∞–ø)
    action: {
      default_popup: 'popup.html',
      default_title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Textarea Fullscreen',
      default_icon: {
        16: '/icon/16.png',
        48: '/icon/48.png',
      },
    },
    
    // –í–µ–±-–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
    web_accessible_resources: [
      {
        resources: ['icon/*.svg', 'icon/*.png'],
        matches: ['<all_urls>']
      }
    ],
    
    // –ö–æ–º–∞–Ω–¥—ã (–≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏)
    commands: {
      toggle_fullscreen: {
        suggested_key: {
          default: 'Ctrl+Shift+F',
          mac: 'Command+Shift+F',
        },
        description: '–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä',
      },
    },
    
    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è Chrome: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
    minimum_chrome_version: '88',
    
    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è Firefox: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
    browser_specific_settings: {
      gecko: {
        id: 'textarea-fullscreen@example.com',
        strict_min_version: '109.0',
      },
    },
  },
  
  // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é dev –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ runner
  dev: {
    server: {
      port: 3000,
    },
  },
  
  // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏
  zip: {
    artifactTemplate: '{{name}}-{{browser}}-{{version}}.zip',
  },
});
```

**–ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ `srcDir: 'src'` (—Ñ–∞–π–ª—ã –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ `author: 'string'` ‚Üí `developer: { name, url }`
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ `runner` ‚Üí –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `dev`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ –∏–∫–æ–Ω–∫–∞–º –Ω–∞ `/icon/` (–Ω–µ `/icons/`)

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã Package.json

```json
{
  "name": "textarea-fullscreen",
  "version": "1.0.0",
  "private": true,
  "type": "module",
  "author": "–í–∞—à–µ –∏–º—è",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/drunkody/textarea-fullscreen.git"
  },
  "scripts": {
    "dev": "wxt",
    "dev:firefox": "wxt -b firefox",
    "build": "wxt build",
    "build:firefox": "wxt build -b firefox",
    "build:all": "npm run build && npm run build:firefox",
    "zip": "wxt zip",
    "zip:firefox": "wxt zip -b firefox",
    "zip:all": "npm run zip && npm run zip:firefox",
    "compile": "tsc --noEmit",
    "postinstall": "wxt prepare"
  }
}
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:**

| –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------|
| `npm run dev` | –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Chrome, –≥–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞) |
| `npm run dev:firefox` | –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Firefox) |
| `npm run build` | Production-—Å–±–æ—Ä–∫–∞ (Chrome MV3) |
| `npm run build:firefox` | Production-—Å–±–æ—Ä–∫–∞ (Firefox MV2) |
| `npm run build:all` | –°–±–æ—Ä–∫–∞ –¥–ª—è –æ–±–æ–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ |
| `npm run zip` | –°–æ–∑–¥–∞—Ç—å Chrome ZIP |
| `npm run zip:firefox` | –°–æ–∑–¥–∞—Ç—å Firefox ZIP |
| `npm run zip:all` | –°–æ–∑–¥–∞—Ç—å ZIP –¥–ª—è –æ–±–æ–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ |
| `npm run compile` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –±–µ–∑ —Å–±–æ—Ä–∫–∏ |

---

### 3. –°–±–æ—Ä–∫–∞ –¥–ª—è Production

```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è Chrome
npm run build

# –°–±–æ—Ä–∫–∞ –¥–ª—è Firefox
npm run build:firefox

# –°–±–æ—Ä–∫–∞ –¥–ª—è –æ–±–æ–∏—Ö
npm run build:all
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```
üìÇ .output/
   üìÇ chrome-mv3/              # Production-—Å–±–æ—Ä–∫–∞ –¥–ª—è Chrome
      üìÇ chunks/               # –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –±–∞–Ω–¥–ª—ã
      üìÑ manifest.json         # Manifest V3
      üìÑ content.js            # –°–æ–±—Ä–∞–Ω–Ω—ã–π content script
      üìÑ popup.html
      üìÑ popup.js
      üìÇ icon/                 # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ public/
   
   üìÇ firefox-mv2/             # Production-—Å–±–æ—Ä–∫–∞ –¥–ª—è Firefox
      üìÑ manifest.json         # Manifest V2
      üìÑ content.js
      üìÑ popup.html
      üìÑ popup.js
      üìÇ icon/
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏:**
- ‚úÖ –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π React (production mode)
- ‚úÖ Tree-shaking (—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞)
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (–º–µ–Ω—å—à–µ –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- ‚úÖ Source maps (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

---

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–Ω—ã—Ö ZIP-—Ñ–∞–π–ª–æ–≤

```bash
# –°–æ–∑–¥–∞—Ç—å Chrome ZIP
npm run zip
# –í—ã–≤–æ–¥: .output/textarea-fullscreen-chrome-1.0.0.zip

# –°–æ–∑–¥–∞—Ç—å Firefox ZIP  
npm run zip:firefox
# –í—ã–≤–æ–¥: .output/textarea-fullscreen-firefox-1.0.0.zip

# –°–æ–∑–¥–∞—Ç—å –æ–±–∞
npm run zip:all
```

---

### 5. GitHub Actions - –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏

**–§–∞–π–ª: `.github/workflows/build.yml`**

```yaml
name: Build Extension

on:
  push:
    branches: [main, develop, 'react/**']
  pull_request:
    branches: [main, develop]

jobs:
  build:
    name: –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        browser: [chrome, firefox]
    
    steps:
      - name: Checkout –∫–æ–¥–∞
        uses: actions/checkout@v4
      
      - name: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
          cache-dependency-path: 'textarea-fullscreen-react/package-lock.json'
      
      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        working-directory: textarea-fullscreen-react
        run: npm ci
      
      - name: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
        working-directory: textarea-fullscreen-react
        run: npm run compile
      
      - name: –°–±–æ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (${{ matrix.browser }})
        working-directory: textarea-fullscreen-react
        run: |
          if [ "${{ matrix.browser }}" == "firefox" ]; then
            npm run build:firefox
          else
            npm run build
          fi
      
      - name: –°–æ–∑–¥–∞–Ω–∏–µ ZIP
        working-directory: textarea-fullscreen-react
        run: |
          if [ "${{ matrix.browser }}" == "firefox" ]; then
            npm run zip:firefox
          else
            npm run zip
          fi
      
      - name: –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏
        uses: actions/upload-artifact@v4
        with:
          name: extension-${{ matrix.browser }}
          path: textarea-fullscreen-react/.output/*.zip
          retention-days: 30
```

---

### 6. GitHub Actions - –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–æ–≤

**–§–∞–π–ª: `.github/workflows/release.yml`**

```yaml
name: Release Extension

on:
  push:
    tags:
      - 'v*.*.*'

permissions:
  contents: write

jobs:
  build-and-release:
    name: –°–±–æ—Ä–∫–∞ –∏ —Ä–µ–ª–∏–∑
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout –∫–æ–¥–∞
        uses: actions/checkout@v4
      
      - name: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
          cache-dependency-path: 'textarea-fullscreen-react/package-lock.json'
      
      - name: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        working-directory: textarea-fullscreen-react
        run: npm ci
      
      - name: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –∏–∑ —Ç–µ–≥–∞
        id: version
        run: echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_OUTPUT
      
      - name: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –≤ —Ñ–∞–π–ª–∞—Ö
        working-directory: textarea-fullscreen-react
        run: |
          npm version ${{ steps.version.outputs.VERSION }} --no-git-tag-version
          sed -i "s/version: '[^']*'/version: '${{ steps.version.outputs.VERSION }}'/" wxt.config.ts
      
      - name: –°–±–æ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è Chrome
        working-directory: textarea-fullscreen-react
        run: |
          npm run build
          npm run zip
      
      - name: –°–±–æ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è Firefox
        working-directory: textarea-fullscreen-react
        run: |
          npm run build:firefox
          npm run zip:firefox
      
      - name: –°–æ–∑–¥–∞–Ω–∏–µ GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            textarea-fullscreen-react/.output/*.zip
          draft: false
          prerelease: false
          generate_release_notes: true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

---

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 1: Manifest V2 vs V3

```mermaid
graph LR
    A[–í–∞—à–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ] --> B{–°–±–æ—Ä–∫–∞ WXT}
    B -->|Chrome| C[Manifest V3]
    B -->|Firefox| D[Manifest V2]
    
    C --> E[Service Workers]
    C --> F[–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ API]
    
    D --> G[Background Pages]
    D --> H[webRequest API]
    
    style C fill:#54bc4a
    style D fill:#ffa500
```

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:**

| –§—É–Ω–∫—Ü–∏—è | Manifest V2 (Firefox) | Manifest V3 (Chrome) |
|---------|----------------------|---------------------|
| **Background** | –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ | Service worker |
| **Host permissions** | –ú–∞—Å—Å–∏–≤ `permissions` | `host_permissions` |
| **webRequest** | –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | –¢–æ–ª—å–∫–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ |
| **CSP** | –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ | –û–±—ä–µ–∫—Ç —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ |
| **Action** | `browser_action` | `action` |

**WXT –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** –ü–∏—à–∏—Ç–µ –æ–¥–∏–Ω —Ä–∞–∑, —Å–æ–±–∏—Ä–∞–π—Ç–µ –¥–ª—è –æ–±–æ–∏—Ö.

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

**Development-—Å–±–æ—Ä–∫–∞:**
```javascript
// content.js - ~500KB –±–µ–∑ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏
import React from 'react';
import ReactDOM from 'react-dom/client';

function MyComponent() {
  console.log('Debug info');
  return <div>Hello</div>;
}
```

**Production-—Å–±–æ—Ä–∫–∞:**
```javascript
// content.js - ~150KB –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
const e=React.createElement;function t(){return e("div",null,"Hello")}
```

**–ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

| –¢–µ—Ö–Ω–∏–∫–∞ | –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ | –£–ª—É—á—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ |
|---------|-------------------|-------------------|
| **–ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è** | 60-70% | –ë—ã—Å—Ç—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥ |
| **Tree shaking** | 20-40% | –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ |
| **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞** | N/A | –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ |
| **Production React** | 30% | –ù–µ—Ç dev-–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π |

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

<details>
<summary><b>–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</b></summary>

- üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ WXT](https://wxt.dev/guide/essentials/building.html)
- üìö [–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Chrome Web Store](https://developer.chrome.com/docs/webstore/publish/)
- üìö [–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Firefox Add-ons](https://extensionworkshop.com/documentation/publish/submitting-an-add-on/)
- üéì [–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Manifest V3](https://developer.chrome.com/docs/extensions/migrating/)
- üí° [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π](https://developer.chrome.com/docs/webstore/best_practices/)
- üîß [–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ](https://semver.org/)

</details>

<details>
<summary><b>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–æ–≤</b></summary>

**Chrome Web Store:**
- –¢—Ä–µ–±—É–µ—Ç—Å—è Manifest V3
- –ò–∫–æ–Ω–∫–∏: 16x16, 48x48, 128x128 (PNG)
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã: 1280x800 –∏–ª–∏ 640x400
- –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ)
- –†–∞–∑–æ–≤–∞—è –ø–ª–∞—Ç–∞ $5 –∑–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

**Firefox Add-ons:**
- Manifest V2 –∏–ª–∏ V3
- –ò–∫–æ–Ω–∫–∏: 48x48, 96x96 (PNG)
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã: –õ—é–±–æ–π —Ä–∞–∑–º–µ—Ä
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
- –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

</details>

---

## –ó–∞–¥–∞–Ω–∏–µ

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–∏:**

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Actions:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   mkdir -p .github/workflows
   
   # –î–æ–±–∞–≤—å—Ç–µ build.yml –∏ release.yml –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤—ã—à–µ
   
   # –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
   git add .github/
   git commit -m "feat: –¥–æ–±–∞–≤–∏—Ç—å CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã"
   git push
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ª–∏–∑:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥ –≤–µ—Ä—Å–∏–∏
   git tag v1.0.0
   
   # –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–≥ (–∑–∞–ø—É—Å—Ç–∏—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–∞)
   git push origin v1.0.0
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: https://github.com/drunkody/textarea-fullscreen-extension/actions
   ```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –°–±–æ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ push
   - ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤)
   - ‚úÖ ZIP-—Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
   - ‚úÖ GitHub release —Å–æ–∑–¥–∞–Ω —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏

**–ë–æ–Ω—É—Å:**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—É–±–ª–∏–∫–∞—Ü–∏—é –≤ –º–∞–≥–∞–∑–∏–Ω—ã
- –ö–∞–Ω–∞–ª –±–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

**–î–∞–ª–µ–µ:** [–°–ª–∞–π–¥ 16: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ](./16-contribute.md)