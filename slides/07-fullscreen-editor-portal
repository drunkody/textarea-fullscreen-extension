# –°–ª–∞–π–¥ 7: –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å React Portal

**–í–µ—Ç–∫–∞:** `react/07-fullscreen-editor-portal`

---

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ—Ä—Ç–∞–ª–æ–º?

–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –º–æ–¥–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω–µ –æ–±—ã—á–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º React Portals. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å–≤–æ–±–æ–¥—É –æ—Ç CSS-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ —Å–æ–∑–¥–∞–µ—Ç —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–ø—ã—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- ‚ö° **React Portals** - –†–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ document.body
- üé® **–û–±—Ö–æ–¥ CSS-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** - –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª overflow/z-index —Ä–æ–¥–∏—Ç–µ–ª–µ–π
- üì¶ **–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π textarea
- üîÑ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º** - –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏, Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
- üõ†Ô∏è **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π Z-Index** - –í—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—Ö—É (2147483647)
- ‚ôªÔ∏è **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ö—É–∫–∏

---

## üìÇ –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

<details>
<summary><b>–ù–æ–≤—ã–µ/–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã</b></summary>

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- üìÅ [components/FullscreenEditor/index.tsx](../textarea-fullscreen-react/components/FullscreenEditor/index.tsx) - –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- üìÅ [components/FullscreenEditor/style.css](../textarea-fullscreen-react/components/FullscreenEditor/style.css) - –°—Ç–∏–ª–∏ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
- üìÅ [components/StatusBadge/index.tsx](../textarea-fullscreen-react/components/StatusBadge/index.tsx) - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞
- üìÅ [components/TextareaButtons/index.tsx](../textarea-fullscreen-react/components/TextareaButtons/index.tsx) - –†–µ–Ω–¥–µ—Ä –∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª

**–•—É–∫–∏:**
- üìÅ [hooks/useButtonContainers.ts](../textarea-fullscreen-react/hooks/useButtonContainers.ts) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∫–Ω–æ–ø–æ–∫
- üìÅ [hooks/useZIndexFix.ts](../textarea-fullscreen-react/hooks/useZIndexFix.ts) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ z-index –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ

**–ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
- üìÅ [entrypoints/content/ContentApp.tsx](../textarea-fullscreen-react/entrypoints/content/ContentApp.tsx) - –û—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

</details>

<details>
<summary><b>–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã</b></summary>

- üìÑ [components/FullscreenButton/index.tsx](../textarea-fullscreen-react/components/FullscreenButton/index.tsx)
- üìÑ [hooks/useTextareaDetector.ts](../textarea-fullscreen-react/hooks/useTextareaDetector.ts)
- üìÑ [utils/constants.ts](../textarea-fullscreen-react/utils/constants.ts)
- üìÑ [utils/logger.ts](../textarea-fullscreen-react/utils/logger.ts)

</details>

---

## ‚úÖ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `FullscreenEditor` —Å React Portal
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è textarea
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ-—Ñ–æ–∫—É—Å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∫–ª–∞–≤–∏—à–∞ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (90vw √ó 90vh)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π z-index –¥–ª—è –≤–µ—Ä—Ö–Ω–µ–≥–æ —Å–ª–æ—è
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –ª—É—á—à–µ–π —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏

**–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
- ‚ôªÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω `ContentApp.tsx` –Ω–∞ 6 –º–æ–¥—É–ª–µ–π
- ‚ôªÔ∏è –°–æ–∑–¥–∞–Ω–æ 2 –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ö—É–∫–∞
- ‚ôªÔ∏è –°–æ–∑–¥–∞–Ω–æ 2 –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- ‚ôªÔ∏è –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å ~200 –¥–æ ~80 —Å—Ç—Ä–æ–∫
- ‚ôªÔ∏è –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

---

**–°–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π–¥:** [–°–ª–∞–π–¥ 8: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ–Ω–æ–≤–æ–≥–æ –æ–≤–µ—Ä–ª–µ—è](./08-overlay-component.md)  

---

## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—à–∞–≥–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
- [–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)
- [–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–ó–∞–¥–∞–Ω–∏–µ](#–∑–∞–¥–∞–Ω–∏–µ)

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```mermaid
graph TB
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å] --> B[isExpanded = true]
    B --> C[FullscreenEditor —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è]
    C --> D[createPortal –≤ document.body]
    D --> E[–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–æ–Ω–∞ textarea]
    E --> F[–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è]
    F --> G[–ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –Ω–∞ –∫–ª–æ–Ω–µ]
    G --> H{–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç?}
    H --> I[–ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è input]
    I --> J[–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π textarea]
    J --> K{–ù–∞–∂–∞—Ç Escape?}
    K --> L[–ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞]
    L --> M[–£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ DOM]
    
    style D fill:#61dafb
    style J fill:#54bc4a
    style L fill:#ffa500
```

**–í–∏–∑—É–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫:**

```
–û–±—ã—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
<body>
  <div class="page-content">
    <div class="tx-editor-wrapper">
      <textarea>–ö–æ–Ω—Ç–µ–Ω—Ç</textarea> ‚Üê –û—Ä–∏–≥–∏–Ω–∞–ª
      <button>‚õ∂</button>
    </div>
  </div>
</body>

–†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
<body>
  <div class="page-content">
    <div class="tx-editor-wrapper">
      <textarea>–ö–æ–Ω—Ç–µ–Ω—Ç</textarea> ‚Üê –û—Ä–∏–≥–∏–Ω–∞–ª (–æ—Å—Ç–∞–µ—Ç—Å—è –∑–¥–µ—Å—å)
      <button>‚õ∂</button>
    </div>
  </div>
  
  <!-- –ü–æ—Ä—Ç–∞–ª —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∑–¥–µ—Å—å -->
  <div class="tx-fullscreen-editor">
    <textarea>–ö–æ–Ω—Ç–µ–Ω—Ç</textarea> ‚Üê –ö–ª–æ–Ω (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω)
    <button>‚äó</button>
  </div>
</body>
```

---

## –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```bash
mkdir -p components/FullscreenEditor
touch components/FullscreenEditor/index.tsx
touch components/FullscreenEditor/style.css
```

---

### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç React Portal

```tsx
// components/FullscreenEditor/index.tsx
import { createPortal } from 'react-dom';
import { useEffect, useRef } from 'react';
import './style.css';

interface FullscreenEditorProps {
  textarea: HTMLTextAreaElement;
  isExpanded: boolean;
  onClose: () => void;
}
```

**–ß—Ç–æ —Ç–∞–∫–æ–µ createPortal?**
- –§—É–Ω–∫—Ü–∏—è –∏–∑ –ø–∞–∫–µ—Ç–∞ `react-dom`
- –†–µ–Ω–¥–µ—Ä–∏—Ç –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ DOM-—É–∑–µ–ª –≤–Ω–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å: `createPortal(children, container)`

---

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ—Ä—Ç–∞–ª–∞

```tsx
// components/FullscreenEditor/index.tsx
export function FullscreenEditor({ 
  textarea, 
  isExpanded, 
  onClose 
}: FullscreenEditorProps) {
  
  // –ù–µ —Ä–µ–Ω–¥–µ—Ä–∏–º, –µ—Å–ª–∏ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ
  if (!isExpanded) return null;

  return createPortal(
    <div className="tx-fullscreen-editor">
      <textarea className="tx-fullscreen-textarea" />
      <FullscreenButton onClick={onClose} isExpanded={true} />
    </div>,
    document.body // ‚Üê –¶–µ–ª—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
  );
}
```

**–ü–æ—á–µ–º—É document.body?**
- DOM-—É–∑–µ–ª –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
- –ù–µ—Ç CSS-–ø–æ–º–µ—Ö –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª–µ–π
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ z-index
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ viewport

---

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–æ–Ω–∞ textarea —Å useRef

```tsx
// components/FullscreenEditor/index.tsx
export function FullscreenEditor({ 
  textarea, 
  isExpanded, 
  onClose 
}: FullscreenEditorProps) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  if (!isExpanded) return null;

  return createPortal(
    <div className="tx-fullscreen-editor">
      <textarea
        ref={cloneRef}
        className="tx-fullscreen-textarea"
        defaultValue={textarea?.value}
      />
      <FullscreenButton onClick={onClose} isExpanded={true} />
    </div>,
    document.body
  );
}
```

**–ó–∞—á–µ–º useRef?**
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ DOM –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ textarea
- –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–≤–æ–π—Å—Ç–≤—É `.value`

---

### –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```tsx
// components/FullscreenEditor/index.tsx
export function FullscreenEditor({ 
  textarea, 
  isExpanded, 
  onClose 
}: FullscreenEditorProps) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  useEffect(() => {
    if (isExpanded && textarea && cloneRef.current) {
      const clone = cloneRef.current;
      
      // 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∫–ª–æ–Ω
      clone.value = textarea.value;
      
      // 2. –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –Ω–∞ –∫–ª–æ–Ω–µ
      clone.focus();

      // 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª
      const syncContent = (e: Event) => {
        textarea.value = (e.target as HTMLTextAreaElement).value;
      };

      clone.addEventListener('input', syncContent);

      // 4. –û—á–∏—Å—Ç–∫–∞
      return () => {
        clone.removeEventListener('input', syncContent);
      };
    }
  }, [isExpanded, textarea]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="tx-fullscreen-editor">
      <textarea
        ref={cloneRef}
        className="tx-fullscreen-textarea"
        defaultValue={textarea?.value}
      />
      <FullscreenButton onClick={onClose} isExpanded={true} />
    </div>,
    document.body
  );
}
```

**–ü–æ—Ç–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
1. –ö–ª–æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç –≤ –∫–ª–æ–Ω–µ
3. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `input`
4. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è textarea
5. –û–±–µ textarea –æ—Å—Ç–∞—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏

---

### –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π

```tsx
// components/FullscreenEditor/index.tsx (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è)
export function FullscreenEditor({ 
  textarea, 
  isExpanded, 
  onClose 
}: FullscreenEditorProps) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  useEffect(() => {
    if (isExpanded && textarea && cloneRef.current) {
      const clone = cloneRef.current;
      clone.value = textarea.value;
      clone.focus();

      const syncContent = (e: Event) => {
        textarea.value = (e.target as HTMLTextAreaElement).value;
      };

      clone.addEventListener('input', syncContent);
      return () => clone.removeEventListener('input', syncContent);
    }
  }, [isExpanded, textarea]);

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à–∏ Escape
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && isExpanded) {
        onClose();
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [isExpanded, onClose]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="tx-fullscreen-editor">
      <textarea
        ref={cloneRef}
        className="tx-fullscreen-textarea"
        defaultValue={textarea?.value}
      />
      <FullscreenButton onClick={onClose} isExpanded={true} />
    </div>,
    document.body
  );
}
```

---

### –®–∞–≥ 7: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CSS-—Å—Ç–∏–ª–µ–π

```css
/* components/FullscreenEditor/style.css */
.tx-fullscreen-editor {
  /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ - —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  
  /* –†–∞–∑–º–µ—Ä - 90% –æ—Ç viewport */
  width: 90vw !important;
  height: 90vh !important;
  max-width: 1400px !important;
  max-height: 900px !important;
  
  /* –í–∏–¥–∏–º–æ—Å—Ç—å - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π z-index */
  z-index: 2147483647 !important;
  
  /* –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ - —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ */
  background: #1e1e1e !important;
  border: 2px solid #444 !important;
  border-radius: 8px !important;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5) !important;
  
  /* –†–∞—Å–∫–ª–∞–¥–∫–∞ */
  padding: 15px !important;
  box-sizing: border-box !important;
  display: flex !important;
  flex-direction: column !important;
}

.tx-fullscreen-textarea {
  /* –†–∞–∑–º–µ—Ä - –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
  width: 100% !important;
  height: 100% !important;
  min-height: 100% !important;
  max-height: 100% !important;
  
  /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ */
  resize: none !important;
  
  /* –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ - —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ */
  background: #2a2a2a !important;
  color: #e0e0e0 !important;
  border: 1px solid #444 !important;
  border-radius: 4px !important;
  
  /* –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ */
  padding: 15px !important;
  font-size: 16px !important;
  line-height: 1.6 !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace !important;
  
  /* –†–∞—Å–∫–ª–∞–¥–∫–∞ */
  box-sizing: border-box !important;
  outline: none !important;
}

.tx-fullscreen-textarea:focus {
  border-color: #666 !important;
}
```

**–†–∞–∑–±–æ—Ä CSS:**
- **–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞:** `top: 50%; left: 50%; transform: translate(-50%, -50%)`
- **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞:** –õ—É—á—à–µ –¥–ª—è —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π z-index:** 2147483647 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ 32-–±–∏—Ç–Ω–æ–µ –∑–Ω–∞–∫–æ–≤–æ–µ —Ü–µ–ª–æ–µ)
- **–û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å:** 90vw/90vh —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ max-width/height

---

## –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üìä –î–æ –∏ –ø–æ—Å–ª–µ

**–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
```
ContentApp.tsx: ~200 —Å—Ç—Ä–æ–∫
‚îú‚îÄ‚îÄ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ textarea ‚ùå
‚îú‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (80 —Å—Ç—Ä–æ–∫) ‚ùå
‚îú‚îÄ‚îÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ z-index (50 —Å—Ç—Ä–æ–∫) ‚ùå
‚îú‚îÄ‚îÄ –õ–æ–≥–∏–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (40 —Å—Ç—Ä–æ–∫) ‚ùå
‚îî‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º ‚ùå
```

**–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
```
ContentApp.tsx: ~80 —Å—Ç—Ä–æ–∫ ‚úÖ
‚îú‚îÄ‚îÄ hooks/useButtonContainers.ts: ~120 —Å—Ç—Ä–æ–∫ ‚úÖ
‚îú‚îÄ‚îÄ hooks/useZIndexFix.ts: ~70 —Å—Ç—Ä–æ–∫ ‚úÖ
‚îú‚îÄ‚îÄ components/StatusBadge/index.tsx: ~25 —Å—Ç—Ä–æ–∫ ‚úÖ
‚îî‚îÄ‚îÄ components/TextareaButtons/index.tsx: ~35 —Å—Ç—Ä–æ–∫ ‚úÖ
```

### üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

**1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)**
```tsx
// ‚ùå –ë–´–õ–û: –í—Å–µ –≤ –æ–¥–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
function ContentApp() {
  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
  // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ z-index
  // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ badge
  // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–Ω–æ–ø–æ–∫
  // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
}

// ‚úÖ –°–¢–ê–õ–û: –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å - –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞
function ContentApp() {
  useButtonContainers(textareas);  // –¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  useZIndexFix(textareas);         // –¢–æ–ª—å–∫–æ z-index
  return <StatusBadge />;          // –¢–æ–ª—å–∫–æ badge
}
```

**2. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å**
```tsx
// ‚úÖ –•—É–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
function AnotherComponent() {
  const { containersRef } = useButtonContainers(elements);
  useZIndexFix(elements, containersRef);
}
```

**3. –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**
```tsx
// ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
test('useButtonContainers creates containers', () => {
  const { containersRef } = renderHook(() => 
    useButtonContainers(mockTextareas)
  );
  expect(containersRef.current.size).toBe(3);
});
```

### üìÅ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
textarea-fullscreen-react/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Badge.tsx                        (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ StatusBadge/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.tsx                    ‚Üê ‚úÖ –ù–û–í–´–ô
‚îÇ   ‚îú‚îÄ‚îÄ TextareaButtons/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.tsx                    ‚Üê ‚úÖ –ù–û–í–´–ô
‚îÇ   ‚îú‚îÄ‚îÄ FullscreenButton/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                    (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css                    (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ FullscreenEditor/
‚îÇ       ‚îú‚îÄ‚îÄ index.tsx                    ‚Üê ‚úÖ –ù–û–í–´–ô
‚îÇ       ‚îî‚îÄ‚îÄ style.css                    ‚Üê ‚úÖ –ù–û–í–´–ô
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useTextareaDetector.ts           (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ useButtonContainers.ts           ‚Üê ‚úÖ –ù–û–í–´–ô
‚îÇ   ‚îî‚îÄ‚îÄ useZIndexFix.ts                  ‚Üê ‚úÖ –ù–û–í–´–ô
‚îú‚îÄ‚îÄ entrypoints/
‚îÇ   ‚îî‚îÄ‚îÄ content/
‚îÇ       ‚îú‚îÄ‚îÄ ContentApp.tsx               ‚Üê ‚ôªÔ∏è –û–¢–†–ï–§–ê–ö–¢–û–†–ï–ù
‚îÇ       ‚îî‚îÄ‚îÄ index.tsx                    (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ constants.ts                     (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
    ‚îú‚îÄ‚îÄ logger.ts                        (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
    ‚îî‚îÄ‚îÄ dom.ts                           (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
```

### üîÑ –ù–æ–≤—ã–µ —Ö—É–∫–∏

**1. useButtonContainers**
```tsx
// hooks/useButtonContainers.ts
export function useButtonContainers(textareas: HTMLTextAreaElement[]) {
  const containersRef = useRef<Map<HTMLTextAreaElement, HTMLDivElement>>(new Map());
  
  useEffect(() => {
    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫
    textareas.forEach((textarea, index) => {
      const buttonContainer = document.createElement('div');
      // ... –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
      parent.appendChild(buttonContainer);
      containersRef.current.set(textarea, buttonContainer);
    });
    
    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
    return () => {
      containersRef.current.forEach(container => container.remove());
    };
  }, [textareas]);
  
  return { containersRef };
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç DOM-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –ø–æ—Ä—Ç–∞–ª–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–æ–¥–∏—Ç–µ–ª–µ–π
- ‚úÖ –û—á–∏—â–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ref –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

**2. useZIndexFix**
```tsx
// hooks/useZIndexFix.ts
export function useZIndexFix(
  textareas: HTMLTextAreaElement[],
  containersRef: React.RefObject<Map<HTMLTextAreaElement, HTMLDivElement>>
) {
  useEffect(() => {
    const handleFocus = (textarea: HTMLTextAreaElement) => {
      const container = containersRef.current?.get(textarea);
      const button = container?.querySelector('.tx-fullscreen-btn');
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∞ –ª–∏ –∫–Ω–æ–ø–∫–∞
      const elementUnderButton = document.elementFromPoint(x, y);
      
      if (elementUnderButton !== button) {
        // –£–≤–µ–ª–∏—á–∏—Ç—å z-index
        container.style.zIndex = String(newZIndex);
      }
    };
    
    textareas.forEach(ta => ta.addEventListener('focus', handleFocus));
    return () => textareas.forEach(ta => ta.removeEventListener('focus', handleFocus));
  }, [textareas, containersRef]);
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ñ–æ–∫—É—Å –Ω–∞ textarea
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—ã—à–∞–µ—Ç z-index –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –û—á–∏—â–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

### üß© –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**1. StatusBadge**
```tsx
// components/StatusBadge/index.tsx
export function StatusBadge({ textareaCount }: StatusBadgeProps) {
  return (
    <div style={{ /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */ }}>
      <Badge color={textareaCount > 0 ? '#4caf50' : '#9e9e9e'}>
        ‚úÖ {textareaCount} textarea{textareaCount !== 1 ? 's' : ''}
      </Badge>
    </div>
  );
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**2. TextareaButtons**
```tsx
// components/TextareaButtons/index.tsx
export function TextareaButtons({
  textareas,
  containersRef,
  expandedIndex,
  onButtonClick
}: TextareaButtonsProps) {
  return (
    <>
      {textareas.map((textarea, index) => {
        const container = containersRef.current?.get(textarea);
        return createPortal(
          <FullscreenButton
            onClick={() => onButtonClick(index)}
            isExpanded={expandedIndex === index}
          />,
          container,
          `button-${index}`
        );
      })}
    </>
  );
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–Ω–æ–ø–æ–∫
- ‚úÖ –ò–∑–æ–ª–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞–ª–∞
- ‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

### ‚ú® –û—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–π ContentApp

```tsx
// entrypoints/content/ContentApp.tsx (–ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
export default function ContentApp() {
  // üé£ –•—É–∫–∏
  const { textareas } = useTextareaDetector();
  const { containersRef } = useButtonContainers(textareas);
  useZIndexFix(textareas, containersRef);
  
  // üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ
  const [expandedIndex, setExpandedIndex] = useState<number | null>(null);
  
  // üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
  const handleButtonClick = useCallback((index: number) => {
    setExpandedIndex(expandedIndex === index ? null : index);
  }, [expandedIndex]);
  
  const handleEditorClose = useCallback(() => {
    setExpandedIndex(null);
  }, []);
  
  // üé® –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
  return (
    <>
      <StatusBadge textareaCount={textareas.length} />
      
      <TextareaButtons
        textareas={textareas}
        containersRef={containersRef}
        expandedIndex={expandedIndex}
        onButtonClick={handleButtonClick}
      />
      
      {expandedIndex !== null && textareas[expandedIndex] && (
        <FullscreenEditor
          textarea={textareas[expandedIndex]}
          isExpanded={true}
          onClose={handleEditorClose}
        />
      )}
    </>
  );
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω —Å ~200 –¥–æ ~80 —Å—Ç—Ä–æ–∫
- ‚úÖ –õ–µ–≥—á–µ —á–∏—Ç–∞—Ç—å –∏ –ø–æ–Ω–∏–º–∞—Ç—å
- ‚úÖ –ü—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –õ—É—á—à–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –°—Ç—Ä–æ–∫ –≤ ContentApp | ~200 | ~80 | **-60%** |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ | 1 | 6 | –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å ‚Üë |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | **+300%** |
| –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å | 0% | 100% | **+100%** |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å (1-10) | 4 | 9 | **+125%** |

---

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 1: React Portals

```mermaid
graph TB
    subgraph "–û–±—ã—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ React"
        A[–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç] --> B[–î–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç]
        B --> C[–†–µ–Ω–¥–µ—Ä –≤–Ω—É—Ç—Ä–∏ —Ä–æ–¥–∏—Ç–µ–ª—è DOM]
    end
    
    subgraph "–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª"
        D[–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç] --> E[–ö–æ–º–ø–æ–Ω–µ–Ω—Ç-–ø–æ—Ä—Ç–∞–ª]
        E --> F[–†–µ–Ω–¥–µ—Ä –≤ document.body]
    end
    
    style C fill:#cccccc
    style F fill:#61dafb
```

**–ë–µ–∑ –ø–æ—Ä—Ç–∞–ª–∞:**
```tsx
<div className="parent">
  <Modal /> {/* –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ .parent */}
</div>

// DOM —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
<div class="parent">
  <div class="modal">...</div>
</div>
```

**–° –ø–æ—Ä—Ç–∞–ª–æ–º:**
```tsx
<div className="parent">
  <Modal /> {/* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–¥–µ—Å—å, –Ω–æ... */}
</div>

// DOM —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
<div class="parent"></div>
<body>
  <div class="modal">...</div> {/* –†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∑–¥–µ—Å—å! */}
</body>
```

**–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç–∞–ª—ã?**
- –û–±—Ö–æ–¥ `overflow: hidden` —É —Ä–æ–¥–∏—Ç–µ–ª–µ–π
- –û–±—Ö–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞–ª–æ–∂–µ–Ω–∏—è z-index
- –ü–æ–ª–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ viewport
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –ø–æ–¥—Å–∫–∞–∑–∫–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 2: –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```mermaid
sequenceDiagram
    participant O as –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è Textarea
    participant C as –ö–ª–æ–Ω Textarea
    participant U as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    
    U->>C: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
    Note over C: value = original.value
    C-->>O: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    
    U->>C: –ü–µ—á–∞—Ç–∞–µ—Ç —Ç–µ–∫—Å—Ç
    C->>C: –°–æ–±—ã—Ç–∏–µ input —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
    C->>O: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
    Note over O,C: –û–±–µ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    
    U->>C: –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
    Note over O: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// 1. –ö–ª–æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
clone.value = original.value;

// 2. –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–ª–æ–Ω–µ
clone.addEventListener('input', (e) => {
  // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
  original.value = e.target.value;
});

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–ª–æ–Ω–µ —Å—Ä–∞–∑—É –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ
```

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º

**–ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏:**
```typescript
useEffect(() => {
  if (isExpanded && cloneRef.current) {
    cloneRef.current.focus(); // ‚úÖ –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å
  }
}, [isExpanded]);
```

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ?**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–∂–∏–¥–∞–µ—Ç —Å—Ä–∞–∑—É –Ω–∞—á–∞—Ç—å –ø–µ—á–∞—Ç–∞—Ç—å
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–ª–∏–∫–∞—Ç—å –≤ textarea
- –õ—É—á—à–∏–π UX –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 4: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π Z-Index

**–ò–µ—Ä–∞—Ä—Ö–∏—è Z-Index:**
```
–ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã:  z-index: 1-1000
–í—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é:   z-index: 1000-10000
–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞:    z-index: 10000-100000
–ü–æ–¥—Å–∫–∞–∑–∫–∏:         z-index: 100000-1000000
–ù–∞—à–∞ –∫–Ω–æ–ø–∫–∞:       z-index: 999999
–ù–∞—à –æ–≤–µ—Ä–ª–µ–π:       z-index: 2147483646
–ù–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä:      z-index: 2147483647 ‚Üê –ú–ê–ö–°–ò–ú–£–ú
```

**–ü–æ—á–µ–º—É 2147483647?**
```javascript
Math.pow(2, 31) - 1 = 2147483647
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ 32-–±–∏—Ç–Ω–æ–µ –∑–Ω–∞–∫–æ–≤–æ–µ —Ü–µ–ª–æ–µ
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ z-index
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ü—Ä–∏–º–µ—Ä 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª

```tsx
// components/FullscreenEditor/index.tsx (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π)
import { createPortal } from 'react-dom';

interface Props {
  isExpanded: boolean;
  onClose: () => void;
}

export function FullscreenEditor({ isExpanded, onClose }: Props) {
  if (!isExpanded) return null;

  return createPortal(
    <div className="fullscreen">
      <textarea />
      <button onClick={onClose}>–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>,
    document.body
  );
}
```

---

### –ü—Ä–∏–º–µ—Ä 2: –° —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```tsx
// components/FullscreenEditor/index.tsx (—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π)
import { createPortal } from 'react-dom';
import { useEffect, useRef } from 'react';

interface Props {
  textarea: HTMLTextAreaElement;
  isExpanded: boolean;
  onClose: () => void;
}

export function FullscreenEditor({ textarea, isExpanded, onClose }: Props) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  useEffect(() => {
    if (isExpanded && cloneRef.current) {
      cloneRef.current.value = textarea.value;
      
      const sync = (e: Event) => {
        textarea.value = (e.target as HTMLTextAreaElement).value;
      };
      
      cloneRef.current.addEventListener('input', sync);
      return () => cloneRef.current?.removeEventListener('input', sync);
    }
  }, [isExpanded, textarea]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="fullscreen">
      <textarea ref={cloneRef} defaultValue={textarea.value} />
      <button onClick={onClose}>–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>,
    document.body
  );
}
```

---

### –ü—Ä–∏–º–µ—Ä 3: –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

```tsx
// components/FullscreenEditor/index.tsx (—Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π)
export function FullscreenEditor({ textarea, isExpanded, onClose }: Props) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  useEffect(() => {
    if (isExpanded && cloneRef.current) {
      cloneRef.current.value = textarea.value;
      cloneRef.current.focus(); // –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å
      
      const sync = (e: Event) => {
        textarea.value = (e.target as HTMLTextAreaElement).value;
      };
      
      cloneRef.current.addEventListener('input', sync);
      return () => cloneRef.current?.removeEventListener('input', sync);
    }
  }, [isExpanded, textarea]);

  // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è
  useEffect(() => {
    const handleKey = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && isExpanded) {
        e.preventDefault();
        onClose();
      }
      
      // Ctrl+S –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø—Ä–∏–º–µ—Ä)
      if (e.ctrlKey && e.key === 's' && isExpanded) {
        e.preventDefault();
        console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ');
      }
    };

    document.addEventListener('keydown', handleKey);
    return () => document.removeEventListener('keydown', handleKey);
  }, [isExpanded, onClose]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="fullscreen">
      <textarea ref={cloneRef} />
      <button onClick={onClose}>–ó–∞–∫—Ä—ã—Ç—å (Esc)</button>
    </div>,
    document.body
  );
}
```

---

### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏—è

```tsx
// components/FullscreenEditor/index.tsx (–ø–æ–ª–Ω–∞—è)
import { createPortal } from 'react-dom';
import { useEffect, useRef } from 'react';
import './style.css';

interface FullscreenEditorProps {
  textarea: HTMLTextAreaElement;
  isExpanded: boolean;
  onClose: () => void;
}

export function FullscreenEditor({ 
  textarea, 
  isExpanded, 
  onClose 
}: FullscreenEditorProps) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–µ–∂–¥—É –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º –∏ –∫–ª–æ–Ω–æ–º
  useEffect(() => {
    if (isExpanded && textarea && cloneRef.current) {
      const clone = cloneRef.current;
      
      // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ñ–æ–∫—É—Å
      clone.value = textarea.value;
      clone.focus();

      // –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
      const syncContent = (e: Event) => {
        textarea.value = (e.target as HTMLTextAreaElement).value;
      };

      clone.addEventListener('input', syncContent);

      return () => {
        clone.removeEventListener('input', syncContent);
      };
    }
  }, [isExpanded, textarea]);

  // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && isExpanded) {
        onClose();
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [isExpanded, onClose]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="tx-fullscreen-editor">
      <textarea
        ref={cloneRef}
        className="tx-fullscreen-textarea"
        defaultValue={textarea?.value}
        placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–µ—á–∞—Ç–∞—Ç—å..."
      />
      <FullscreenButton onClick={onClose} isExpanded={true} />
    </div>,
    document.body
  );
}
```

---

## –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 1: –ü–æ—Ä—Ç–∞–ª —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π</b></summary>

```tsx
import { useState, useEffect } from 'react';

export function FullscreenEditor({ isExpanded, onClose }: Props) {
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    if (isExpanded) {
      setIsVisible(true);
    } else {
      // –ó–∞–¥–µ—Ä–∂–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
      const timer = setTimeout(() => setIsVisible(false), 300);
      return () => clearTimeout(timer);
    }
  }, [isExpanded]);

  if (!isVisible) return null;

  return createPortal(
    <div 
      className="fullscreen"
      style={{
        opacity: isExpanded ? 1 : 0,
        transition: 'opacity 0.3s ease'
      }}
    >
      <textarea />
    </div>,
    document.body
  );
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è
- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–Ω—ã–π UX

</details>

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 2: –ü–æ—Ä—Ç–∞–ª –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</b></summary>

```tsx
export function FullscreenEditor({ container, isExpanded }: Props) {
  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é document.body, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω
  const portalContainer = container || document.body;

  if (!isExpanded) return null;

  return createPortal(
    <div className="fullscreen">
      <textarea />
    </div>,
    portalContainer
  );
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ç–µ—Å—Ç–∞—Ö)
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- –°—Ü–µ–Ω–∞—Ä–∏–∏ Shadow DOM

</details>

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 3: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ body</b></summary>

```tsx
export function FullscreenEditor({ isExpanded, onClose }: Props) {
  useEffect(() => {
    if (isExpanded) {
      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ body
      document.body.style.overflow = 'hidden';
      
      return () => {
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        document.body.style.overflow = '';
      };
    }
  }, [isExpanded]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="fullscreen">
      <textarea />
    </div>,
    document.body
  );
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Ñ–æ–Ω–∞
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–æ–∫—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
- –õ—É—á—à–∏–π UX –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤

</details>

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

<details>
<summary><b>–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</b></summary>

- üìö [React Portals - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://react.dev/reference/react-dom/createPortal)
- üìö [createPortal API Reference](https://react.dev/reference/react-dom/createPortal)
- üéì [–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ React](https://react.dev/learn/responding-to-events)
- üí° [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º - MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus)
- üéì [Z-Index –Ω–∞–ª–æ–∂–µ–Ω–∏–µ - MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Understanding_z-index)
- üèóÔ∏è [–ü—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏](https://ru.wikipedia.org/wiki/–ü—Ä–∏–Ω—Ü–∏–ø_–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π_–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)
- üß™ [Testing React Hooks](https://react-hooks-testing-library.com/)

</details>

---

## –ó–∞–¥–∞–Ω–∏–µ

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–∏:**

1. **–î–æ–±–∞–≤—å—Ç–µ —Å—á–µ—Ç—á–∏–∫ —Å–ª–æ–≤/—Å–∏–º–≤–æ–ª–æ–≤:**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–∏–≤–æ–≥–æ —Å—á–µ—Ç–∞ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å: "–°–∏–º–≤–æ–ª–æ–≤: 245 | –°–ª–æ–≤: 42"
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏

2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–Ω–∞—á–æ–∫ "–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"
   - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..." –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã

3. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã:**
   - –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ localStorage
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –º–æ–¥–∞–ª—å–Ω–æ–º—É –æ–∫–Ω—É –∏ textarea

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```tsx
<div className="fullscreen">
  <div className="toolbar">
    <span>–°–∏–º–≤–æ–ª–æ–≤: {count} | –°–ª–æ–≤: {words}</span>
    <span>{isSaving ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ'}</span>
    <button onClick={toggleTheme}>üåì</button>
  </div>
  <textarea />
</div>
```

**–ë–æ–Ω—É—Å:**
- –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ markdown
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–º–µ–Ω—É/–ø–æ–≤—Ç–æ—Ä –¥–µ–π—Å—Ç–≤–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
- –í—ã–¥–µ–ª–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Å–ª–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫ `useWordCount`
- –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `EditorToolbar`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ `useTheme` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–æ–π

---

**–°–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π–¥:** [–°–ª–∞–π–¥ 8: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ–Ω–æ–≤–æ–≥–æ –æ–≤–µ—Ä–ª–µ—è](./08-overlay-component.md)