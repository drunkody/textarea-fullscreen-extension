# –°–ª–∞–π–¥ 9: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏—è

**–í–µ—Ç–∫–∞:** `react/09-keyboard-shortcuts`

---

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏—è?

–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞–∂–∞—Ç—å Ctrl+8 –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –ª—é–±–æ–≥–æ textarea –∏ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ—Å—à–æ–≤–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- ‚ö° **–ü–∞—Ç—Ç–µ—Ä–Ω –ö–∞—Å—Ç–æ–º–Ω—ã—Ö –•—É–∫–æ–≤** - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π `useKeyboardShortcut` –¥–ª—è –ª—é–±–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–ª–∞–≤–∏—à
- üé® **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ü–æ–≤–µ–¥–µ–Ω–∏—è** - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à –±—Ä–∞—É–∑–µ—Ä–∞
- üì¶ **–£—Å–ª–æ–≤–Ω—ã–µ –°–ª—É—à–∞—Ç–µ–ª–∏** - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- üîÑ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –£—Ç–µ—á–µ–∫ –ü–∞–º—è—Ç–∏** - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å useRef
- üõ†Ô∏è **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π Ctrl, Alt, Shift
- üñ•Ô∏è **–ö—Ä–æ—Å—Å-–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Mac (Cmd) –∏ Windows/Linux (Ctrl)

---

## üìÇ –§–∞–π–ª—ã –¥–ª—è –ò–∑—É—á–µ–Ω–∏—è

<details>
<summary><b>–ù–æ–≤—ã–µ –§–∞–π–ª—ã</b></summary>

- üìÑ **[hooks/useKeyboardShortcut.ts](../textarea-fullscreen-react/hooks/useKeyboardShortcut.ts)** - –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π

</details>

<details>
<summary><b>–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –§–∞–π–ª—ã</b></summary>

- üìÑ [entrypoints/content/ContentApp.tsx](../textarea-fullscreen-react/entrypoints/content/ContentApp.tsx) - –î–æ–±–∞–≤–ª–µ–Ω Ctrl+F –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
- üìÑ [components/FullscreenEditor/index.tsx](../textarea-fullscreen-react/components/FullscreenEditor/index.tsx) - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–∞ useKeyboardShortcut
- üìÑ [utils/constants.ts](../textarea-fullscreen-react/utils/constants.ts) - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è KEYBOARD_SHORTCUTS

</details>

---

## ‚úÖ –ß—Ç–æ –ù–æ–≤–æ–≥–æ –≤ –≠—Ç–æ–º –°–ª–∞–π–¥–µ

- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ö—É–∫ `useKeyboardShortcut` —Å useRef –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∫–æ–ª–ª–±—ç–∫–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **Ctrl+F** –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –¥–ª—è —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ textarea
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏—à–∞ **Escape** –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (—É—Å–ª–æ–≤–Ω–æ - —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç)
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ctrl+F –±–æ–ª—å—à–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∏—Å–∫)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ - —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π textarea
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —É—Å–ª–æ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–ª—É—à–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `enabled`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (Cmd –Ω–∞ Mac, Ctrl –Ω–∞ Windows/Linux —á–µ—Ä–µ–∑ `metaKey`)

---

**–°–ª–µ–¥—É—é—â–∏–π:** [–°–ª–∞–π–¥ 10: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ](./10-settings-popup.md)  

---

## üìë –î–µ—Ç–∞–ª—å–Ω—ã–π –û–±–∑–æ—Ä

- [–ö–∞–∫ –≠—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [–®–∞–≥–∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—à–∞–≥–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–ö–ª—é—á–µ–≤—ã–µ –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
- [–ü—Ä–∏–º–µ—Ä—ã –ö–æ–¥–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)
- [–û–±—â–∏–µ –ü–∞—Ç—Ç–µ—Ä–Ω—ã](#–æ–±—â–∏–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-ru)
- [–ó–∞–¥–∞–Ω–∏–µ](#–∑–∞–¥–∞–Ω–∏–µ)

---

## –ö–∞–∫ –≠—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç

```mermaid
graph TB
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–ª–∞–≤–∏—à—É] --> B{–ö–ª–∞–≤–∏—à–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç?}
    B -->|–ù–µ—Ç| C[–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å]
    B -->|–î–∞| D{–¢—Ä–µ–±—É–µ—Ç—Å—è Ctrl?}
    D -->|–î–∞| E{Ctrl –Ω–∞–∂–∞—Ç?}
    D -->|–ù–µ—Ç| F[–í—ã–ø–æ–ª–Ω–∏—Ç—å callback]
    E -->|–î–∞| F
    E -->|–ù–µ—Ç| C
    F --> G[preventDefault]
    G --> H[–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ]
    H --> I[–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º / –ó–∞–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä]
    
    style B fill:#61dafb
    style F fill:#54bc4a
    style H fill:#ffa500
```

**–ü–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∫–ª–∞–≤–∏—à (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ctrl+F)
2. –ë—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ keydown
3. –•—É–∫ useKeyboardShortcut –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏ (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (Ctrl, Alt, Shift)
6. –í—ã–∑—ã–≤–∞–µ—Ç e.preventDefault() –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
7. –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é callback –∏–∑ callbackRef
8. ContentApp –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ò–õ–ò FullscreenEditor –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

---

## –®–∞–≥–∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞—Ç—å –§–∞–π–ª –ö–∞—Å—Ç–æ–º–Ω–æ–≥–æ –•—É–∫–∞

```bash
touch hooks/useKeyboardShortcut.ts
```

---

### 2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –•—É–∫–∞

```typescript
// hooks/useKeyboardShortcut.ts
import { useEffect, useRef } from 'react';

interface KeyboardShortcutOptions {
  ctrl?: boolean;
  alt?: boolean;
  shift?: boolean;
  enabled?: boolean;
  preventDefault?: boolean;
}

export function useKeyboardShortcut(
  key: string,
  callback: () => void,
  options: KeyboardShortcutOptions = {}
) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `key` - –ö–ª–∞–≤–∏—à–∞ –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è ('f', 'Escape', 'Enter' –∏ —Ç.–¥.)
- `callback` - –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏
- `options` - –û–±—ä–µ–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è

---

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å useRef –¥–ª—è –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –£—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ó–∞–º—ã–∫–∞–Ω–∏–π

```typescript
// hooks/useKeyboardShortcut.ts
export function useKeyboardShortcut(
  key: string,
  callback: () => void,
  options: KeyboardShortcutOptions = {}
) {
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º ref —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Å–ª—É—à–∞—Ç–µ–ª—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ callback
  const callbackRef = useRef(callback);

  // –î–µ—Ä–∂–∏–º ref callback –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º
  useEffect(() => {
    callbackRef.current = callback;
  }, [callback]);

  useEffect(() => {
    // –ù–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å –µ—Å–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω
    if (options.enabled === false) {
      logger.debug('[useKeyboardShortcut] –û—Ç–∫–ª—é—á–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å');
      return;
    }

    const handleKeyDown = (e: KeyboardEvent) => {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏ (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
      const keyMatch = e.key.toLowerCase() === key.toLowerCase();
      
      if (keyMatch) {
        // –í—ã–ø–æ–ª–Ω–∏—Ç—å callback –∏–∑ ref (–≤—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–π)
        callbackRef.current();
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    
    // –û—á–∏—Å—Ç–∫–∞
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [key, options.enabled]);
}
```

**–ó–∞—á–µ–º `useRef`?**
- –ò–∑–±–µ–≥–∞–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–º—ã–∫–∞–Ω–∏–π –≤ —Å–ª—É—à–∞—Ç–µ–ª—è—Ö —Å–æ–±—ã—Ç–∏–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ callback
- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

### 4. –î–æ–±–∞–≤–∏—Ç—å –ü–æ–¥–¥–µ—Ä–∂–∫—É –ö–ª–∞–≤–∏—à-–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ –°—Ç—Ä–æ–≥–∏–º –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º

```typescript
// hooks/useKeyboardShortcut.ts
export function useKeyboardShortcut(
  key: string,
  callback: () => void,
  options: KeyboardShortcutOptions = {}
) {
  const callbackRef = useRef(callback);

  useEffect(() => {
    callbackRef.current = callback;
  }, [callback]);

  useEffect(() => {
    if (options.enabled === false) return;

    const handleKeyDown = (e: KeyboardEvent) => {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∞–≤–∏—à–∏-–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å–æ –°–¢–†–û–ì–ò–ú —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º
      const ctrlMatch = options.ctrl 
        ? (e.ctrlKey || e.metaKey)  // Ctrl —Ç—Ä–µ–±—É–µ—Ç—Å—è
        : !e.ctrlKey && !e.metaKey; // Ctrl –ù–ï —Ä–∞–∑—Ä–µ—à—ë–Ω
      
      const altMatch = options.alt 
        ? e.altKey 
        : !e.altKey;
      
      const shiftMatch = options.shift 
        ? e.shiftKey 
        : !e.shiftKey;
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏
      const keyMatch = e.key.toLowerCase() === key.toLowerCase();
      
      // –í—Å–µ —É—Å–ª–æ–≤–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å—Ç–∏–Ω–Ω—ã–º–∏
      if (keyMatch && ctrlMatch && altMatch && shiftMatch) {
        callbackRef.current();
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [key, options.ctrl, options.alt, options.shift, options.enabled]);
}
```

**–ó–∞—á–µ–º —Å—Ç—Ä–æ–≥–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ?**
- `Ctrl+F` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ—Å—Ç–æ `F`
- `Escape` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ `Ctrl+Escape`
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

---

### 5. –î–æ–±–∞–≤–∏—Ç—å preventDefault –∏ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–æ–ª–Ω–∞—è –í–µ—Ä—Å–∏—è)

```typescript
// hooks/useKeyboardShortcut.ts (–ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø)
import { useEffect, useRef } from 'react';
import { logger } from '../utils/logger';

interface KeyboardShortcutOptions {
  ctrl?: boolean;
  alt?: boolean;
  shift?: boolean;
  enabled?: boolean;
  preventDefault?: boolean;
}

export function useKeyboardShortcut(
  key: string,
  callback: () => void,
  options: KeyboardShortcutOptions = {}
) {
  const callbackRef = useRef(callback);

  // –î–µ—Ä–∂–∏–º callback ref –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º
  useEffect(() => {
    callbackRef.current = callback;
  }, [callback]);

  useEffect(() => {
    // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–æ
    if (options.enabled === false) {
      logger.debug('[useKeyboardShortcut] –û—Ç–∫–ª—é—á–µ–Ω–æ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å');
      return;
    }

    const handleKeyDown = (e: KeyboardEvent) => {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∞–≤–∏—à–∏-–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
      const ctrlMatch = options.ctrl 
        ? (e.ctrlKey || e.metaKey) 
        : !e.ctrlKey && !e.metaKey;
      
      const altMatch = options.alt 
        ? e.altKey 
        : !e.altKey;
      
      const shiftMatch = options.shift 
        ? e.shiftKey 
        : !e.shiftKey;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏ (–±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
      const keyMatch = e.key.toLowerCase() === key.toLowerCase();

      if (keyMatch && ctrlMatch && altMatch && shiftMatch) {
        logger.info(`[useKeyboardShortcut] –°—Ä–∞–±–æ—Ç–∞–ª–æ: ${key}`, { 
          ctrl: e.ctrlKey, 
          alt: e.altKey, 
          shift: e.shiftKey 
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)
        if (options.preventDefault !== false) {
          e.preventDefault();
        }

        // –í—ã–ø–æ–ª–Ω–∏—Ç—å callback
        callbackRef.current();
      }
    };

    logger.debug('[useKeyboardShortcut] –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è', { key, options });
    document.addEventListener('keydown', handleKeyDown);

    return () => {
      logger.debug('[useKeyboardShortcut] –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è', { key });
      document.removeEventListener('keydown', handleKeyDown);
    };
  }, [key, options.ctrl, options.alt, options.shift, options.enabled, options.preventDefault]);
}
```

---

### 6. –î–æ–±–∞–≤–∏—Ç—å –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã KEYBOARD_SHORTCUTS

```typescript
// utils/constants.ts (–î–û–ë–ê–í–ò–¢–¨ –≠–¢–û)
export const KEYBOARD_SHORTCUTS = {
  toggleFullscreen: 'f',     // Ctrl+F –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
  closeEditor: 'Escape',     // Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
  save: 's',                 // Ctrl+S –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–≤ –±—É–¥—É—â–µ–º)
  help: '?',                 // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å –ø–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è–º (–≤ –±—É–¥—É—â–µ–º)
} as const;
```

---

### 7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ ContentApp –¥–ª—è Ctrl+F

```tsx
// entrypoints/content/ContentApp.tsx (–ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø)
import { useKeyboardShortcut } from '../../hooks/useKeyboardShortcut';
import { KEYBOARD_SHORTCUTS } from '../../utils/constants';

export default function ContentApp() {
  const { textareas } = useTextareaDetector();
  const [expandedIndex, setExpandedIndex] = useState<number | null>(null);

  // ===== –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ: Ctrl+F –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ =====
  useKeyboardShortcut(
    KEYBOARD_SHORTCUTS.toggleFullscreen,
    () => {
      logger.group('‚å®Ô∏è [ContentApp] –ù–∞–∂–∞—Ç Ctrl+F');
      
      // –ù–∞–π—Ç–∏ —Ç–µ–∫—É—â–∏–π —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π textarea
      const activeElement = document.activeElement;
      
      if (activeElement instanceof HTMLTextAreaElement) {
        // –ù–∞–π—Ç–∏ –∏–Ω–¥–µ–∫—Å —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ textarea
        const index = textareas.indexOf(activeElement);
        
        if (index !== -1) {
          logger.info('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –¥–ª—è —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ textarea', { index });
          
          // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ: –∑–∞–∫—Ä—ã—Ç—å –µ—Å–ª–∏ —É–∂–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç, –æ—Ç–∫—Ä—ã—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç
          setExpandedIndex(expandedIndex === index ? null : index);
        } else {
          logger.warn('–°—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π textarea –Ω–µ –≤ –Ω–∞—à–µ–º —Å–ø–∏—Å–∫–µ');
        }
      } else {
        logger.debug('–ù–µ—Ç —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ textarea, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ');
        
        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–µ—Ä–≤—ã–π textarea –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–æ
        if (textareas.length > 0 && expandedIndex === null) {
          logger.info('–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ textarea');
          setExpandedIndex(0);
        }
      }
      
      logger.groupEnd();
    },
    { ctrl: true }
  );

  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
}
```

---

### 8. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ FullscreenEditor –¥–ª—è Escape

```tsx
// components/FullscreenEditor/index.tsx (–ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø)
import { useKeyboardShortcut } from '../../hooks/useKeyboardShortcut';
import { KEYBOARD_SHORTCUTS } from '../../utils/constants';

export function FullscreenEditor({ textarea, isExpanded, onClose }: Props) {
  const cloneRef = useRef<HTMLTextAreaElement>(null);

  // ===== –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏—è =====
  // Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç)
  useKeyboardShortcut(
    KEYBOARD_SHORTCUTS.closeEditor, 
    onClose, 
    { enabled: isExpanded }
  );

  // ===== –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ö–æ–Ω—Ç–µ–Ω—Ç–∞ =====
  useEffect(() => {
    if (isExpanded && textarea && cloneRef.current) {
      const clone = cloneRef.current;
      clone.value = textarea.value;
      clone.focus();

      const syncContent = (e: Event) => {
        textarea.value = (e.target as HTMLTextAreaElement).value;
      };

      clone.addEventListener('input', syncContent);
      return () => clone.removeEventListener('input', syncContent);
    }
  }, [isExpanded, textarea]);

  if (!isExpanded) return null;

  return createPortal(
    <div className="tx-fullscreen-editor">
      <textarea ref={cloneRef} className="tx-fullscreen-textarea" />
      <FullscreenButton onClick={onClose} isExpanded={true} />
    </div>,
    document.body
  );
}
```

---

## –ö–ª—é—á–µ–≤—ã–µ –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 1: Event.preventDefault()

```mermaid
graph LR
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç Ctrl+F] --> B{preventDefault –≤—ã–∑–≤–∞–Ω?}
    B -->|–ù–µ—Ç| C[–ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –ø–æ–∏—Å–∫–∞]
    B -->|–î–∞| D[–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ]
    D --> E[–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º]
    
    style C fill:#f44336
    style E fill:#54bc4a
```

**–ë–µ–∑ preventDefault:**
```typescript
// ‚ùå –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
const handleKeyDown = (e: KeyboardEvent) => {
  if (e.ctrlKey && e.key === 'f') {
    toggle(); // –í–∞—à–µ –¥–µ–π—Å—Ç–≤–∏–µ
    // –ë—Ä–∞—É–∑–µ—Ä –¢–ê–ö–ñ–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –ø–æ–∏—Å–∫–∞ ‚Üê –ü–õ–û–•–û!
  }
};
```

**–° preventDefault:**
```typescript
// ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞—à–µ –¥–µ–π—Å—Ç–≤–∏–µ
const handleKeyDown = (e: KeyboardEvent) => {
  if (e.ctrlKey && e.key === 'f') {
    e.preventDefault(); // –ë–ª–æ–∫–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
    toggle(); // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∞—à–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Üê –•–û–†–û–®–û!
  }
};
```

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 2: –ö–ª–∞–≤–∏—à–∏-–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏ –ö—Ä–æ—Å—Å-–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–°–≤–æ–π—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:**
```typescript
interface KeyboardEvent {
  key: string;       // 'f', 'Escape', 'Enter' –∏ —Ç.–¥.
  ctrlKey: boolean;  // Ctrl –Ω–∞–∂–∞—Ç?
  metaKey: boolean;  // Cmd (Mac) –∏–ª–∏ Win –Ω–∞–∂–∞—Ç?
  altKey: boolean;   // Alt/Option –Ω–∞–∂–∞—Ç?
  shiftKey: boolean; // Shift –Ω–∞–∂–∞—Ç?
}
```

**–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl:**
```typescript
// ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Mac (Cmd) –∏ Windows/Linux (Ctrl)
const ctrlMatch = e.ctrlKey || e.metaKey;

// Mac: Cmd+F ‚Üí metaKey=true, ctrlKey=false
// Windows/Linux: Ctrl+F ‚Üí ctrlKey=true, metaKey=false
```

**–û–±—â–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:**
```typescript
// Ctrl+F (–∏–ª–∏ Cmd+F –Ω–∞ Mac)
if ((e.ctrlKey || e.metaKey) && e.key === 'f') { }

// Alt+S
if (e.altKey && e.key === 's') { }

// Shift+Enter
if (e.shiftKey && e.key === 'Enter') { }

// Ctrl+Shift+K
if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'k') { }
```

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 3: –£—Å–ª–æ–≤–Ω—ã–µ –°–ª—É—à–∞—Ç–µ–ª–∏ –°–æ–±—ã—Ç–∏–π

```mermaid
graph TB
    A[–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è] --> B{enabled === false?}
    B -->|–î–∞| C[–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å]
    B -->|–ù–µ—Ç| D[–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å]
    D --> E[–°–ª—É—à–∞—Ç—å –∫–ª–∞–≤–∏—à–∏]
    
    F[–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è] --> G[–£–¥–∞–ª–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å]
    
    style C fill:#ffa500
    style D fill:#54bc4a
```

**–ó–∞—á–µ–º —É—Å–ª–æ–≤–Ω—ã–µ?**
```typescript
// ‚úÖ –°–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç
useKeyboardShortcut('Escape', onClose, {
  enabled: isExpanded  // ‚Üê –ê–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ true
});

// ‚úÖ –°–ª—É—à–∞—Ç—å –≤—Å–µ–≥–¥–∞
useKeyboardShortcut('f', toggle, {
  ctrl: true
  // enabled –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω = –≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–æ
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ß–∏—â–µ –∫–æ–¥ (–Ω–µ—Ç —Ä—É—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ if)

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 4: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –£—Ç–µ—á–µ–∫ –ü–∞–º—è—Ç–∏ —Å useRef

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ - —Å–ª—É—à–∞—Ç–µ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è**
```typescript
// ‚ùå –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏
useEffect(() => {
  document.addEventListener('keydown', handleKeyDown);
  // –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—á–∏—Å—Ç–∫–∞!
}, []);
```

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ**
```typescript
// ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ - callback –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    if (e.key === 'Escape') {
      onClose(); // ‚Üê –≠—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä!
    }
  };

  document.addEventListener('keydown', handleKeyDown);
  return () => document.removeEventListener('keydown', handleKeyDown);
}, [onClose]); // ‚Üê –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ onClose –º–µ–Ω—è–µ—Ç—Å—è
```

**–†–µ—à–µ–Ω–∏–µ: useRef + –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞**
```typescript
// ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å + –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
const callbackRef = useRef(callback);

useEffect(() => {
  callbackRef.current = callback; // –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–π callback
}, [callback]);

useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    if (e.key === 'Escape') {
      callbackRef.current(); // ‚Üê –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π callback
    }
  };

  document.addEventListener('keydown', handleKeyDown);
  
  return () => {
    document.removeEventListener('keydown', handleKeyDown); // ‚Üê –û—á–∏—Å—Ç–∫–∞!
  };
}, []); // ‚Üê –ù–µ—Ç callback –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö!
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è ‚Üí –°–ª—É—à–∞—Ç–µ–ª—å –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è
2. Callback –º–µ–Ω—è–µ—Ç—Å—è ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ ref (–Ω–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è)
3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è ‚Üí –°–ª—É—à–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç—Å—è
4. –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏! ‚úÖ
5. –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å! ‚úÖ

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è 5: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –§–æ–∫—É—Å–∞

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```typescript
// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
const activeElement = document.activeElement;

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω textarea
if (activeElement instanceof HTMLTextAreaElement) {
  // –ù–∞–π—Ç–∏ –µ–≥–æ –≤ –Ω–∞—à–µ–º —Å–ø–∏—Å–∫–µ
  const index = textareas.indexOf(activeElement);
  
  if (index !== -1) {
    // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –≠–¢–û–ì–û textarea
    setExpandedIndex(index);
  }
}
```

**–ó–∞—á–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞?**
- ‚úÖ –í–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ textarea –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ textarea –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π UX (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Ñ–æ–∫—É—Å–æ–º)
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## –ü—Ä–∏–º–µ—Ä—ã –ö–æ–¥–∞

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–ó–∞–∫—Ä—ã—Ç–∏–µ –ú–æ–¥–∞–ª—å–Ω–æ–≥–æ –û–∫–Ω–∞)

```tsx
// –ü—Ä–æ—Å—Ç–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à–∏ Escape
function Modal({ onClose }) {
  useKeyboardShortcut('Escape', onClose);
  
  return <div className="modal">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞</div>;
}
```

---

### –ü—Ä–∏–º–µ—Ä 2: –° –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º Ctrl (–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)

```tsx
// Ctrl+S –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
function Editor({ onSave }) {
  useKeyboardShortcut('s', onSave, { ctrl: true });
  
  return <textarea />;
}
```

---

### –ü—Ä–∏–º–µ—Ä 3: –£—Å–ª–æ–≤–Ω–∞—è –ê–∫—Ç–∏–≤–∞—Ü–∏—è

```tsx
// –ê–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ
function App() {
  const [isOpen, setIsOpen] = useState(false);
  
  useKeyboardShortcut('Escape', () => setIsOpen(false), {
    enabled: isOpen  // ‚Üê –°–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ
  });
  
  return (
    <>
      <button onClick={() => setIsOpen(true)}>–û—Ç–∫—Ä—ã—Ç—å</button>
      {isOpen && <Modal />}
    </>
  );
}
```

---

### –ü—Ä–∏–º–µ—Ä 4: –ù–µ—Å–∫–æ–ª—å–∫–æ –°–æ–∫—Ä–∞—â–µ–Ω–∏–π –≤ –û–¥–Ω–æ–º –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```tsx
// –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π
function TextEditor() {
  const [content, setContent] = useState('');
  const [isBold, setIsBold] = useState(false);
  
  // Ctrl+B –¥–ª—è –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
  useKeyboardShortcut('b', () => setIsBold(!isBold), { 
    ctrl: true 
  });
  
  // Ctrl+S –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  useKeyboardShortcut('s', () => save(content), { 
    ctrl: true 
  });
  
  // Ctrl+Z –¥–ª—è –æ—Ç–º–µ–Ω—ã
  useKeyboardShortcut('z', () => undo(), { 
    ctrl: true 
  });
  
  return (
    <textarea 
      value={content} 
      onChange={e => setContent(e.target.value)} 
      style={{ fontWeight: isBold ? 'bold' : 'normal' }}
    />
  );
}
```

---

## –û–±—â–∏–µ –ü–∞—Ç—Ç–µ—Ä–Ω—ã

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 1: –°–æ–∫—Ä–∞—â–µ–Ω–∏—è-–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏</b></summary>

```tsx
function Component() {
  const [isActive, setIsActive] = useState(false);
  
  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∫–ª–∞–≤–∏—à–µ–π
  useKeyboardShortcut('t', () => setIsActive(prev => !prev), {
    ctrl: true
  });
  
  return <div>{isActive ? '–ê–∫—Ç–∏–≤–Ω–æ' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–æ'}</div>;
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤–∫–ª/–≤—ã–∫–ª, –æ—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å)
- –û–¥–Ω–∞ –∫–ª–∞–≤–∏—à–∞ –¥–ª—è –æ–±–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ü—Ä–æ—Å—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

</details>

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 2: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–ó–∞–≤–∏—Å–∏–º—ã–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏—è</b></summary>

```tsx
function Editor() {
  const [mode, setMode] = useState<'edit' | 'preview'>('edit');
  
  // –†–∞–∑–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
  useKeyboardShortcut('Enter', () => {
    if (mode === 'edit') {
      save();
    } else {
      setMode('edit');
    }
  }, { ctrl: true });
  
  return <div>–†–µ–∂–∏–º: {mode}</div>;
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –û–¥–Ω–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ, —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
- –î–µ–π—Å—Ç–≤–∏—è –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏

</details>

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 3: –¶–µ–ø–æ—á–∫–∏ –°–æ–∫—Ä–∞—â–µ–Ω–∏–π (–í –°—Ç–∏–ª–µ VS Code)</b></summary>

```tsx
function App() {
  const [commandMode, setCommandMode] = useState(false);
  
  // Ctrl+K –≤—Ö–æ–¥–∏—Ç –≤ –∫–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º
  useKeyboardShortcut('k', () => setCommandMode(true), {
    ctrl: true
  });
  
  // –ó–∞—Ç–µ–º 'S' –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ)
  useKeyboardShortcut('s', () => {
    save();
    setCommandMode(false);
  }, {
    enabled: commandMode
  });
  
  // –ó–∞—Ç–µ–º 'Q' –¥–ª—è –≤—ã—Ö–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ)
  useKeyboardShortcut('q', () => {
    quit();
    setCommandMode(false);
  }, {
    enabled: commandMode
  });
  
  return <div>{commandMode && '‚å®Ô∏è –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω'}</div>;
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –°–æ–∫—Ä–∞—â–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ VS Code (Ctrl+K, –∑–∞—Ç–µ–º S)
- –ö–æ–º–∞–Ω–¥–Ω—ã–µ —Ä–µ–∂–∏–º—ã –≤ —Å—Ç–∏–ª–µ Vim
- –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

</details>

<details>
<summary><b>–ü–∞—Ç—Ç–µ—Ä–Ω 4: –õ–æ–∫–∞–ª—å–Ω—ã–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏—è</b></summary>

```tsx
function Component() {
  const elementRef = useRef<HTMLDivElement>(null);
  
  useEffect(() => {
    const element = elementRef.current;
    if (!element) return;
    
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'Enter') {
        console.log('Enter –Ω–∞–∂–∞—Ç –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞');
      }
    };
    
    // –°–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ (–Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ)
    element.addEventListener('keydown', handleKeyDown);
    return () => element.removeEventListener('keydown', handleKeyDown);
  }, []);
  
  return <div ref={elementRef} tabIndex={0}>–°—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç</div>;
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –°–æ–∫—Ä–∞—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

</details>

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üß™ –ß–µ–∫-–õ–∏—Å—Ç –†—É—á–Ω–æ–≥–æ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ë–∞–∑–æ–≤–∞—è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- [ ] **Ctrl+F** –Ω–∞ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º textarea ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- [ ] **Ctrl+F** —Å–Ω–æ–≤–∞ ‚Üí –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
- [ ] **Escape** –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ ‚Üí –ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä
- [ ] **Ctrl+F** –±–µ–∑ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ textarea ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–π textarea (–∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç)

**–ì—Ä–∞–Ω–∏—á–Ω—ã–µ –°–ª—É—á–∞–∏:**
- [ ] –î–∏–∞–ª–æ–≥ –ø–æ–∏—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è (preventDefault —Ä–∞–±–æ—Ç–∞–µ—Ç)
- [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ textarea ‚Üí Ctrl+F –≤–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –º–µ–∂–¥—É textarea ‚Üí –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Ñ–æ–∫—É—Å–æ–º
- [ ] –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ ‚Üí –°–æ–∫—Ä–∞—â–µ–Ω–∏—è –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
- [ ] –ù–∞–∂–∞—Ç–∏–µ `F` –±–µ–∑ Ctrl ‚Üí –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (—Å—Ç—Ä–æ–≥–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)

**–ö—Ä–æ—Å—Å-–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å:**
- [ ] **Mac**: Cmd+F —Ä–∞–±–æ—Ç–∞–µ—Ç (metaKey)
- [ ] **Windows/Linux**: Ctrl+F —Ä–∞–±–æ—Ç–∞–µ—Ç (ctrlKey)

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- [ ] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ DevTools Memory)
- [ ] –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—á–∏—â–∞—é—Ç—Å—è
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Å–ª—É—à–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ

---

### üîç –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –ª–∏ —Å–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
getEventListeners(document).keydown

// 2. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å Ctrl+F
document.dispatchEvent(new KeyboardEvent('keydown', {
  key: 'f',
  ctrlKey: true,
  bubbles: true
}))

// 3. –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å Escape
document.dispatchEvent(new KeyboardEvent('keydown', {
  key: 'Escape',
  bubbles: true
}))

// 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
console.log(document.activeElement)

// 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω textarea
console.log(document.activeElement instanceof HTMLTextAreaElement)
```

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (RU)

<details>
<summary><b>–°–≤—è–∑–∞–Ω–Ω—ã–µ –†–µ—Å—É—Ä—Å—ã</b></summary>

- üìö [KeyboardEvent - MDN (RU)](https://developer.mozilla.org/ru/docs/Web/API/KeyboardEvent)
- üìö [Event.preventDefault() - MDN (RU)](https://developer.mozilla.org/ru/docs/Web/API/Event/preventDefault)
- üéì [–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –°–æ–±—ã—Ç–∏—è - JavaScript.info (RU)](https://learn.javascript.ru/keyboard-events)
- üí° [React useEffect - React Docs](https://react.dev/reference/react/useEffect)
- üí° [React useRef - React Docs](https://react.dev/reference/react/useRef)
- üéì [–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ –°–æ–∫—Ä–∞—â–µ–Ω–∏—è Web-–†–∞—Å—à–∏—Ä–µ–Ω–∏–π](https://developer.mozilla.org/ru/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands)

</details>

---

## –ó–∞–¥–∞–Ω–∏–µ

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–∏:**

### –ó–∞–¥–∞–Ω–∏–µ 1: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ù–µ—Å–∫–æ–ª—å–∫–∏—Ö –°–æ–∫—Ä–∞—â–µ–Ω–∏–π
```tsx
// –†–∞–∑—Ä–µ—à–∏—Ç—å –º–∞—Å—Å–∏–≤ –∫–ª–∞–≤–∏—à: ['f', 'F']
useKeyboardShortcut(['f', 'F'], toggle, { ctrl: true })
```
- –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –ª—é–±—É—é –∫–ª–∞–≤–∏—à—É –≤ –º–∞—Å—Å–∏–≤–µ
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –≤–∞—Ä–∏–∞—Ü–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–∞

### –ó–∞–¥–∞–Ω–∏–µ 2: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ó–∞–ø–∏—Å–∏ –°–æ–∫—Ä–∞—â–µ–Ω–∏–π
```tsx
<ShortcutRecorder
  value={settings.shortcut}
  onChange={setShortcut}
  conflicts={['Ctrl+F', 'Ctrl+S']}
/>
```
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: "Ctrl+Shift+K"
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Å–≤–æ–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 3: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –µ—Å–ª–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π
- –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

**–ë–æ–Ω—É—Å:**
- –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è (—Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π (Ctrl+K, –∑–∞—Ç–µ–º S)
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é —à–ø–∞—Ä–≥–∞–ª–∫—É –ø–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è–º (–Ω–∞–∂–∞—Ç—å `?`)

---

**–°–ª–µ–¥—É—é—â–∏–π:** [–°–ª–∞–π–¥ 10: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ](./10-settings-popup.md)